<ion-content class="athlete-registration-content">
  <div class="header-section">
    <div class="header-nav">
      <ion-button 
        (click)="goBack()"
        fill="clear" 
        color="light"
        class="back-button">
        <ion-icon name="arrow-back" slot="icon-only"></ion-icon>
      </ion-button>
      <h1 class="page-title">Criar Conta de Atleta</h1>
      <div class="header-spacer"></div>
    </div>
    <p class="page-subtitle">Complete seu perfil de atleta</p>
  </div>

  <div class="content-wrapper">
    <!-- Informações Pessoais -->
    <div class="section-card">
      <h2 class="section-title">Informações Pessoais</h2>
      
      <div class="form-group">
        <label class="form-label">
          <ion-icon name="person-outline" class="label-icon"></ion-icon>
          Nome Completo *
        </label>
        <ion-input 
          [(ngModel)]="athleteData.name"
          placeholder="Seu nome completo"
          class="custom-input">
        </ion-input>
      </div>

      <div class="form-group">
        <label class="form-label">
          <ion-icon name="calendar-outline" class="label-icon"></ion-icon>
          Data de Nascimento *
        </label>
        <ion-datetime 
          [(ngModel)]="athleteData.birthDate"
          presentation="date"
          class="custom-datetime">
        </ion-datetime>
      </div>

      <div class="form-group">
        <label class="form-label">
          <ion-icon name="location-outline" class="label-icon"></ion-icon>
          Cidade onde treina *
        </label>
        <ion-input 
          [(ngModel)]="athleteData.city"
          placeholder="Ex: São Paulo, SP"
          class="custom-input">
        </ion-input>
      </div>
    </div>

    <!-- Graduação -->
    <div class="section-card">
      <h2 class="section-title">Graduação Atual</h2>
      
      <div class="form-group">
        <label class="form-label">
          <ion-icon name="trophy-outline" class="label-icon"></ion-icon>
          Faixa *
        </label>
        <ion-select 
          [(ngModel)]="athleteData.belt"
          (ionChange)="onBeltChange()"
          placeholder="Selecione sua faixa"
          class="custom-select">
          <ion-select-option 
            *ngFor="let belt of bjjBelts" 
            [value]="belt.value">
            {{ belt.label }}
          </ion-select-option>
        </ion-select>
      </div>

      <div *ngIf="athleteData.belt && getMaxDegrees(athleteData.belt) > 0" class="form-group">
        <label class="form-label">Graus</label>
        <div class="degree-controls">
          <ion-button 
            (click)="decrementDegree()"
            fill="outline" 
            size="small"
            class="degree-btn">
            <ion-icon name="remove"></ion-icon>
          </ion-button>
          <span class="degree-value">{{ athleteData.degree }}</span>
          <ion-button 
            (click)="incrementDegree()"
            fill="outline" 
            size="small"
            class="degree-btn">
            <ion-icon name="add"></ion-icon>
          </ion-button>
        </div>
        <p class="degree-info">Máximo: {{ getMaxDegrees(athleteData.belt) }} graus</p>
      </div>

      <!-- Preview da Faixa -->
      <div *ngIf="athleteData.belt" class="belt-preview">
        <p class="preview-label">Preview da sua graduação:</p>
        <div class="belt-display">
          <div class="belt-base {{ getBeltColor(athleteData.belt) }}"></div>
          <span class="belt-text">
            <!--   Faixa {{ bjjBelts.find(b => b.value === athleteData.belt)?.label }} -->
            <span *ngIf="athleteData.degree > 0">{{ athleteData.degree }}º Grau</span>
          </span>
        </div>
      </div>
    </div>

    <!-- Horários de Treino -->
    <div class="section-card">
      <h2 class="section-title">Horários de Treino</h2>
      
      <div class="form-group">
        <label class="form-label">
          <ion-icon name="calendar-outline" class="label-icon"></ion-icon>
          Dia da Semana
        </label>
        <ion-select 
          [(ngModel)]="newSchedule.dayOfWeek"
          placeholder="Selecione o dia"
          class="custom-select">
          <ion-select-option 
            *ngFor="let day of daysOfWeek" 
            [value]="day.value">
            {{ day.label }}
          </ion-select-option>
        </ion-select>
      </div>

      <div class="form-group">
        <label class="form-label">
          <ion-icon name="time-outline" class="label-icon"></ion-icon>
          Horário
        </label>
        <ion-datetime 
          [(ngModel)]="newSchedule.time"
          presentation="time"
          class="custom-datetime">
        </ion-datetime>
      </div>

      <div class="form-group">
        <label class="form-label">
          <ion-icon name="shirt-outline" class="label-icon"></ion-icon>
          Tipo de Treino
        </label>
        <ion-radio-group [(ngModel)]="newSchedule.withGi" class="training-type-group">
          <ion-item class="training-type-item">
            <ion-radio slot="start" [value]="true"></ion-radio>
            <ion-label>Com Kimono (Gi)</ion-label>
          </ion-item>
          <ion-item class="training-type-item">
            <ion-radio slot="start" [value]="false"></ion-radio>
            <ion-label>Sem Kimono (No-Gi)</ion-label>
          </ion-item>
        </ion-radio-group>
      </div>

      <ion-button 
        (click)="addTrainingSchedule()"
        expand="block"
        color="success"
        class="add-schedule-button">
        <ion-icon name="time-outline" slot="start"></ion-icon>
        Adicionar Horário
      </ion-button>

      <!-- Lista de Horários Adicionados -->
      <div *ngIf="athleteData.trainingSchedules.length > 0" class="schedules-list">
        <h3 class="schedules-title">Horários cadastrados:</h3>
        <div 
          *ngFor="let schedule of athleteData.trainingSchedules; let i = index" 
          class="schedule-item">
          <div class="schedule-content">
            <div class="schedule-info">
              <span class="schedule-day">{{ getDayLabel(schedule.dayOfWeek) }}</span>
              <span class="schedule-time">às {{ schedule.time }}</span>
              <span class="schedule-type" [ngClass]="schedule.withGi ? 'type-gi' : 'type-nogi'">
                {{ schedule.withGi ? 'Com Kimono' : 'Sem Kimono' }}
              </span>
            </div>
          </div>
          <ion-button 
            (click)="removeTrainingSchedule(i)"
            fill="clear" 
            color="danger"
            size="small">
            <ion-icon name="trash-outline"></ion-icon>
          </ion-button>
        </div>
      </div>
    </div>

    <!-- Botão Salvar -->
    <div class="save-section">
      <ion-button 
        (click)="saveAthlete()"
        expand="block"
        size="large"
        class="save-button">
        <ion-icon name="save-outline" slot="start"></ion-icon>
        Criar Conta de Atleta
      </ion-button>
      
      <p class="required-fields">* Campos obrigatórios</p>
    </div>
  </div>
</ion-content>